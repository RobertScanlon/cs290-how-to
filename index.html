<!DOCTYPE html>
<head>
  <meta lang="en" charset="utf-8" />
  <title>How-To Homepage</title>
  <link rel="stylesheet" type="text/css" href="./css/style.css" />
  <script src="./js/cardsBorder.js"></script>
  <script src="./js/codeExample1.js"></script>
</head>
<body>

  <div id="hpTitle">
    <h1>How-To Guide for Chase Robert's 'Deck of Cards' API</h1>
    <h2>Created by Robert Scanlon (CS290 Winter 2017)</h2>
  </div>

  <div id="leftBorder"></div>
  <div id="rightBorder"></div>

  <div class="bodyDiv">
    <p>
      Welcome to the How-To Guide for Chase Robert's 'Deck of Cards'
      API. <a href="https://deckofcardsapi.com/">Click here</a> to
      navigate to the API documentation provided by the creator.
    </p>
  </div>

  <div class=bodyDiv>
    <h1 class="cardSeparator">&#x1f0a1;</h1>
    <h2>Basic API useage</h2>
    <p>
      The 'Deck of Cards' API provides web developers a simple tool for
      creating, displaying, and manipulating a virtual 'deck' of playing cards.
      This guide will provide instruction for use of all the API's features in
      addition to examples of the API im use for some typical applications.
    </p>
    <h3>Notes On API Use In This Guide</h3>
    <p>
      Many public APIs require the use of an API 'key', a unique identifier
      belonging to a developer. Keys are often used to track and possible limit
      useage of an API according to the agreement bewteen API creator and
      developer. No keys are required to use the 'Deck of Cards' API.
      Therefore, all code examples provided in this tutorial can be copied and
      used 'as is', there is no need to append an API key onto any of the
      requests shown.
    </p>
    <p>
      The 'Deck of Cards' API allows requests to be send via either GET or POST
      methods. Since most of the requests require relatively simple data to be
      sent, this guide will show all requests being made via GET.
    </p>
  </div>

  <div class="bodyDiv" id="ex1Div">
    <h1 class="cardSeparator">&#x1f0a1;</h1>
    <h2>Requesting A Deck</h2>
    <p>
      For most applications, use of the API is a two step process. First,
      a request is made for a 'deck' of cards. This deck may be a standard 52
      card deck of playing cards, a 'multi-deck' composed of an arbitrary
      number of standard decks, or a custom deck, with only certain cards
      included. Once a request is made, the API will return a 'deck_id'
      string which uniquely identifies the requested deck. The second step is
      then to make further calls to the API passing the deck_id as a
      parameter. This second step will allow for manipulation of the deck,
      including drawing and shuffling cards.
    </p>
    <h3>Example 1: A Fresh Pack of Cards</h3>
    <p id="codeEx1">
      We now start our API turorial as if we have just bought a new pack of
      playing cards from the store. To simulate this activity on the Web,
      we must set up the following JavaScript function.
      <pre class="jsCode">

// Assume we have an input button with 'id' = "getFreshDeckButton"
// in our page's HTML file

document.addEventListener("DOMContentLoaded", bindGetFreshDeck);

function bindGetFreshDeck() {
  document.getElementById("getFreshDeckButton").addEventListener(
    "click", function(event) {
      var request = new XMLHttpRequest();
      var APIurl = "https://deckofcardsapi.com/api/deck/new/";
      request.open("GET", APIurl, true);
      request.send(null);
      request.addEventListener("load", function() {
        if (request.status >= 200 && request.status < 400) {
          var freshDeck = JSON.parse(request.responseText);
        } else {
          console.log("error");
        }
      });
    event.preventDefault();
  });
}
      </pre>
      <div class="inputButton">
        <input type="submit" name="getFreshDeckButton" value="Run This Code"
               id="ex1Button" />
      </div>
    </p>
  </div>
  <div class="bodyDivAfterEx">
    <p>
      We will focus our attention on the callback function we nested in
      our 'bindGetFreshDeck' function. Here we create a new 'request'
      object and call its 'open' method passing it three parameters.
      These parameters will be the primary way by which we interact with
      the API. For all examples in this tutorial, the firt parameter 'GET'
      will stay the same. The next paramter, the url string, will be the
      most important as
      it will direct our request to the right location and hold information
      we wish to pass to the API. Our last paramter will
      always be true, as we want all of our requests to be asynchronous.
    </p>
    <p>
      After calling 'open', we call 'send' passing 'null' as an argument, as
      we are sending no additional data. We then add an event listener to our
      request object which will wait until the API's responde is done loading.
      If the repsonse status of our request is OK we can then proceed with
      further processing, which in our case involves creating a JavaScript
      object containing the contents the API's response to our request.
    </p>
    </p>
    <p>
      After running the code above you should see a list of four items and
      their associated values. This data was contained in our example in the
      variable 'freshDeck', which was created by parsing the JSON encoded
      string returned by the API. 
    </p>
  </div>
</body>
</html>
